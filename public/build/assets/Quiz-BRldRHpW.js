import{_ as q}from"./GuestLayout-C69NrVoC.js";import{s as b}from"./index-D83T4aAw.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as r,o as n,a as i,t as l,F as g,r as f,n as w,b as z,d as m,e as d,w as y,v as C,f as x,g as v,h as j}from"./app-eWoWM0QS.js";import{p as Q}from"./lodash-CSZeLXE4.js";import"./ApplicationLogo-CicuA9eW.js";import"./index-DKmkAHrk.js";const A={name:"Question",props:{question:{type:Object}},data(){return{selected:[]}},methods:{toggle(e){const t=this.selected.indexOf(e);t>-1?this.selected.splice(t,1):this.selected.push(e),this.$emit("change",{id:this.question.id,selected:this.mapSelected()})},mapSelected(){return this.selected.map(e=>this.question.options[e].id)}}},B={class:"text-lg font-bold"},$={class:"py-3"},O=["onClick"],S={key:0,class:"pi pi-check-square text-green-600"},D={key:1,class:"pi pi-stop"};function L(e,t,a,h,s,o){return n(),r("div",null,[i("p",B,l(this.question.question),1),i("div",$,[t[1]||(t[1]=i("p",{class:"mb-2"},"Zaznacz wszystkie pasujące odpowiedzi:",-1)),(n(!0),r(g,null,f(a.question.options,(c,u)=>(n(),r("div",{onClick:p=>o.toggle(u),class:"mb-1 cursor-pointer flex items-center p-4 text-sm text-gray-800 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",role:"alert"},[s.selected.includes(u)?(n(),r("p",S)):(n(),r("p",D)),t[0]||(t[0]=i("span",{class:"sr-only"},"Info",-1)),i("div",{class:w(["ml-3",s.selected.includes(u)?"text-green-600":""])},l(c.option),3)],8,O))),256))])])}const N=_(A,[["render",L]]),V={name:"Quiz",methods:{next(){if(this.current>=this.questionsCount-1){this.current=this.questionsCount-1;return}this.current+=1},prev(){if(this.current<=0){this.current=0;return}this.current-=1},questionAnswered(e){console.log(e);let t=this.answers.findIndex(a=>a.id===e.id);console.log(e.id,t),t>-1&&this.answers.splice(t,1),e.selected.length>0&&this.answers.push(e)},finish(){this.error=null,axios.post(location.href,{answers:this.answers}).then(e=>{window.location.reload()}).catch(e=>{this.error=e.response.data.message})}},props:{quiz:null},components:{Question:N},data(){return{current:0,questionsCount:0,answers:[],error:null}},mounted(){this.questionsCount=this.quiz.questions.length},computed:{hasAllAnswers(){return this.answers.length===this.quiz.questions.length}}},F={class:"py-3 flex mt-3"},H={class:"flex-1"},I={class:"text-center flex-1"},M={class:"flex-1 text-right"},T={key:0,class:"text-right"},Z={key:1,class:"mt-3 p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"};function E(e,t,a,h,s,o){const c=b,u=z("Question");return n(),r("div",null,[i("div",F,[i("div",H,[d(c,{icon:"pi pi-chevron-left",label:"Wstecz",outlined:"",disabled:s.current===0,onClick:o.prev},null,8,["disabled","onClick"])]),i("div",I," Pytanie "+l(s.current+1)+" z "+l(s.questionsCount),1),i("div",M,[d(c,{icon:"pi pi-chevron-right",label:"Dalej",outlined:"",disabled:s.current>=s.questionsCount-1,"icon-pos":"right",onClick:o.next},null,8,["disabled","onClick"])])]),(n(!0),r(g,null,f(this.quiz.questions,(p,k)=>y((n(),x(u,{question:p,onChange:o.questionAnswered},null,8,["question","onChange"])),[[C,k===this.current]])),256)),this.hasAllAnswers?(n(),r("div",T,[d(c,{icon:"pi pi-forward","icon-pos":"right",label:"Zakończ test",onClick:o.finish},null,8,["onClick"])])):m("",!0),s.error?(n(),r("div",Z,l(s.error),1)):m("",!0)])}const P=_(V,[["render",E]]),R=["innerHTML"],ee={__name:"Quiz",props:{certificate:Object,attempt:Object},setup(e){const{_:t,debounce:a,pickBy:h}=Q,s=e;return v({}),(o,c)=>(n(),x(q,null,{default:j(()=>[i("h1",{class:"mb-4 text-lg font-extrabold leading-none tracking-tight text-gray-900 md:text-xl lg:text-xl dark:text-white",innerHTML:e.certificate.title_formatted},null,8,R),i("p",null," Rozwiązujesz test jako: "+l(s.attempt.name)+" ("+l(s.attempt.email)+") ",1),d(P,{quiz:e.certificate.quiz},null,8,["quiz"])]),_:1}))}};export{ee as default};

import{s as D}from"./index-DXD7U8ZK.js";import{l as B,s as I,a as T}from"./loadToast-CTDn_seI.js";import{s as j,a as P}from"./index-jcdTHmgU.js";import{b as U,s as E}from"./index-CZtCi0PK.js";import{V as F,T as K,N as L,W as R,X as g,c as z,o as b,w as i,b as l,a as t,K as c,L as f,e as u,t as w,f as A,g as G}from"./app-Cq_0W1p7.js";import{_ as W}from"./AppLayout-8s0-wKKt.js";import X from"./Create-LjDXm3h1.js";import Y from"./Edit-f34wEt-C.js";import{p as q}from"./lodash-CkzWJA0n.js";import"./index-njMZyE4e.js";import"./index-D3FpkwxF.js";import"./index-Bwa4bLzk.js";import"./index-DkbD6T2c.js";import"./index-B2-9oGzY.js";import"./index-DJKwCWcD.js";import"./index-CeojN2GL.js";import"./index-Cv1wiMas.js";import"./index-SYNUfPc1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C8KQmatC.js";const H={class:"card"},J={class:"flex justify-end"},M={class:"flex items-center gap-4"},Q={key:0},ye={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(a){const{_:y,debounce:C,pickBy:$}=q,p=a;B();const d=F(!1),v=K({}),s=L({params:{search:p.filters.search,field:p.filters.field,order:p.filters.order,createOpen:!1,editOpen:!1},permission:null}),k=()=>{var r;d.value=!1,v.delete(route("permission.destroy",(r=s.permission)==null?void 0:r.id),{preserveScroll:!0,onSuccess:()=>{v.reset()},onError:()=>null,onFinish:()=>null})},x=r=>{g.get(route("permission.index"),{page:r.page+1},{preserveState:!0})};return R(()=>y.cloneDeep(s.params),C(()=>{let r=$(s.params);g.get(route("permission.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(r,e)=>{const m=U,_=P,N=E,O=j,n=T,h=I,S=D;return b(),z(W,null,{default:i(()=>[l("div",H,[t(X,{show:s.createOpen,onClose:e[0]||(e[0]=o=>s.createOpen=!1),title:p.title},null,8,["show","title"]),t(Y,{show:s.editOpen,onClose:e[1]||(e[1]=o=>s.editOpen=!1),permission:s.permission,title:p.title},null,8,["show","permission","title"]),c(t(m,{label:"Create",onClick:e[2]||(e[2]=o=>s.createOpen=!0),icon:"pi pi-plus"},null,512),[[f,r.can(["create permission"])]]),t(h,{lazy:"",value:a.permissions.data,paginator:"",rows:a.permissions.per_page,totalRecords:a.permissions.total,first:(a.permissions.current_page-1)*a.permissions.per_page,onPage:x,tableStyle:"min-width: 50rem"},{header:i(()=>[l("div",J,[t(O,null,{default:i(()=>[t(_,null,{default:i(()=>e[6]||(e[6]=[l("i",{class:"pi pi-search"},null,-1)])),_:1}),t(N,{modelValue:s.params.search,"onUpdate:modelValue":e[3]||(e[3]=o=>s.params.search=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:i(()=>e[7]||(e[7]=[u(" No data found. ")])),loading:i(()=>e[8]||(e[8]=[u(" Loading data. Please wait. ")])),default:i(()=>[t(n,{header:"No"},{body:i(o=>[u(w(o.index+1),1)]),_:1}),t(n,{field:"name",header:"Name"}),t(n,{field:"guard_name",header:"Guard"}),t(n,{field:"created_at",header:"Created"}),t(n,{field:"updated_at",header:"Updated"}),t(n,{exportable:!1,style:{"min-width":"12rem"}},{body:i(o=>[c(t(m,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:V=>(s.editOpen=!0,s.permission=o.data)},null,8,["onClick"]),[[f,r.can(["update permission"])]]),c(t(m,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:V=>{d.value=!0,s.permission=o.data}},null,8,["onClick"]),[[f,r.can(["delete permission"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(S,{visible:d.value,"onUpdate:visible":e[5]||(e[5]=o=>d.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[t(m,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=o=>d.value=!1)}),t(m,{label:"Yes",icon:"pi pi-check",onClick:k})]),default:i(()=>[l("div",M,[e[11]||(e[11]=l("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),s.permission?(b(),A("span",Q,[e[9]||(e[9]=u("Are you sure you want to delete ")),l("b",null,w(s.permission.name),1),e[10]||(e[10]=u("?"))])):G("",!0)])]),_:1},8,["visible"])])]),_:1})}}};export{ye as default};

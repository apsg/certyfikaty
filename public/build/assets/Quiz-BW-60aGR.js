import{_ as b}from"./GuestLayout-DAgiDIYc.js";import{s as k}from"./index-D1HopQUA.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as o,o as i,a as n,t as r,F as _,r as g,n as q,b as z,d as w,e as d,w as C,v as y,f,g as v,h as j}from"./app-4pxEi1np.js";import{p as Q}from"./lodash-fpP3lDWW.js";import"./ApplicationLogo-8-v9RqOQ.js";import"./index-CbPX7etn.js";const B={name:"Question",props:{question:{type:Object}},data(){return{selected:[]}},methods:{toggle(e){const t=this.selected.indexOf(e);t>-1?this.selected.splice(t,1):this.selected.push(e),this.$emit("change",{id:this.question.id,selected:this.mapSelected()})},mapSelected(){return this.selected.map(e=>this.question.options[e].id)}}},$={class:"text-lg font-bold"},O={class:"py-3"},S=["onClick"],D={key:0,class:"pi pi-check-square text-green-600"},N={key:1,class:"pi pi-stop"};function V(e,t,a,h,s,c){return i(),o("div",null,[n("p",$,r(this.question.question),1),n("div",O,[t[1]||(t[1]=n("p",{class:"mb-2"},"Zaznacz wszystkie pasujące odpowiedzi:",-1)),(i(!0),o(_,null,g(a.question.options,(l,u)=>(i(),o("div",{onClick:p=>c.toggle(u),class:"mb-1 cursor-pointer flex items-center p-4 text-sm text-gray-800 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600",role:"alert"},[s.selected.includes(u)?(i(),o("p",D)):(i(),o("p",N)),t[0]||(t[0]=n("span",{class:"sr-only"},"Info",-1)),n("div",{class:q(["ml-3",s.selected.includes(u)?"text-green-600":""])},r(l.option),3)],8,S))),256))])])}const A=m(B,[["render",V]]),F={name:"Quiz",methods:{next(){if(this.current>=this.questionsCount-1){this.current=this.questionsCount-1;return}this.current+=1},prev(){if(this.current<=0){this.current=0;return}this.current-=1},questionAnswered(e){console.log(e);let t=this.answers.findIndex(a=>a.id===e.id);console.log(e.id,t),t>-1&&this.answers.splice(t,1),e.selected.length>0&&this.answers.push(e)},finish(){this.error=null,axios.post(location.href,{answers:this.answers}).then(e=>{window.location.reload()}).catch(e=>{this.error=e.response.data.message})}},props:{quiz:null},components:{Question:A},data(){return{current:0,questionsCount:0,answers:[],error:null}},mounted(){this.questionsCount=this.quiz.questions.length}},I={class:"py-3 flex mt-3"},Z={class:"flex-1"},E={class:"text-center flex-1"},L={class:"flex-1 text-right"},P={class:"text-right"},R={key:0,class:"mt-3 p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"};function W(e,t,a,h,s,c){const l=k,u=z("Question");return i(),o("div",null,[n("div",I,[n("div",Z,[d(l,{icon:"pi pi-chevron-left",label:"Wstecz",outlined:"",disabled:s.current===0,onClick:c.prev},null,8,["disabled","onClick"])]),n("div",E," Pytanie "+r(s.current+1)+" z "+r(s.questionsCount),1),n("div",L,[d(l,{icon:"pi pi-chevron-right",label:"Dalej",outlined:"",disabled:s.current>=s.questionsCount-1,"icon-pos":"right",onClick:c.next},null,8,["disabled","onClick"])])]),(i(!0),o(_,null,g(this.quiz.questions,(p,x)=>C((i(),f(u,{question:p,onChange:c.questionAnswered},null,8,["question","onChange"])),[[y,x===this.current]])),256)),n("div",P,[d(l,{icon:"pi pi-forward","icon-pos":"right",label:"Zakończ test",disabled:this.answers.length!==this.quiz.questions.length,onClick:c.finish},null,8,["disabled","onClick"])]),s.error?(i(),o("div",R,r(s.error),1)):w("",!0)])}const G=m(F,[["render",W]]),H={class:"mb-4 text-lg font-extrabold leading-none tracking-tight text-gray-900 md:text-xl lg:text-xl dark:text-white"},ee={__name:"Quiz",props:{certificate:Object,attempt:Object},setup(e){const{_:t,debounce:a,pickBy:h}=Q,s=e;return v({}),(c,l)=>(i(),f(b,null,{default:j(()=>[n("h1",H,r(e.certificate.title),1),n("p",null," Rozwiązujesz test jako: "+r(s.attempt.name)+" ("+r(s.attempt.email)+") ",1),d(G,{quiz:e.certificate.quiz},null,8,["quiz"])]),_:1}))}};export{ee as default};

import{s as V}from"./index-BNJ-WY2x.js";import{l as B,s as j,a as I}from"./loadToast-DeyDC2o7.js";import{c as T,b as P}from"./index-C7WUVdAB.js";import{s as U}from"./index-DbMHzhds.js";import{s as E}from"./index-7KC58EmR.js";import{a7 as F,T as R,g as z,a8 as A,N as g,f as G,o as b,h as i,a as l,e as t,w as c,v as f,j as u,t as w,c as K,d as L}from"./app-B5p4ZRge.js";import{_ as Y}from"./AppLayout-BiaR4akb.js";import q from"./Create-DAFg_upt.js";import H from"./Edit-B5dVy9Qs.js";import{p as J}from"./lodash-DKDjeJ0A.js";import"./index-omwYMbdT.js";import"./index-Cz6u3jBZ.js";import"./index-Bj24aspG.js";import"./index-BM2qKZjq.js";import"./index-AThN66pC.js";import"./index-D5tgSO8Z.js";import"./index-DbXPlkzg.js";import"./index-C0wzhZSp.js";import"./index-7lKcm1qK.js";import"./index-B8DycnLL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-B7N-B9rY.js";const M={class:"card"},Q={class:"flex justify-end"},W={class:"flex items-center gap-4"},X={key:0},$e={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(a){const{_:y,debounce:C,pickBy:$}=J,p=a;B();const m=F(!1),v=R({}),s=z({params:{search:p.filters.search,field:p.filters.field,order:p.filters.order,createOpen:!1,editOpen:!1},permission:null}),k=()=>{var r;m.value=!1,v.delete(route("permission.destroy",(r=s.permission)==null?void 0:r.id),{preserveScroll:!0,onSuccess:()=>{v.reset()},onError:()=>null,onFinish:()=>null})},x=r=>{g.get(route("permission.index"),{page:r.page+1},{preserveState:!0})};return A(()=>y.cloneDeep(s.params),C(()=>{let r=$(s.params);g.get(route("permission.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(r,e)=>{const d=E,_=P,h=U,N=T,n=I,O=j,S=V;return b(),G(Y,null,{default:i(()=>[l("div",M,[t(q,{show:s.createOpen,onClose:e[0]||(e[0]=o=>s.createOpen=!1),title:p.title},null,8,["show","title"]),t(H,{show:s.editOpen,onClose:e[1]||(e[1]=o=>s.editOpen=!1),permission:s.permission,title:p.title},null,8,["show","permission","title"]),c(t(d,{label:"Create",onClick:e[2]||(e[2]=o=>s.createOpen=!0),icon:"pi pi-plus"},null,512),[[f,r.can(["create permission"])]]),t(O,{lazy:"",value:a.permissions.data,paginator:"",rows:a.permissions.per_page,totalRecords:a.permissions.total,first:(a.permissions.current_page-1)*a.permissions.per_page,onPage:x,tableStyle:"min-width: 50rem"},{header:i(()=>[l("div",Q,[t(N,null,{default:i(()=>[t(_,null,{default:i(()=>e[6]||(e[6]=[l("i",{class:"pi pi-search"},null,-1)])),_:1}),t(h,{modelValue:s.params.search,"onUpdate:modelValue":e[3]||(e[3]=o=>s.params.search=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:i(()=>e[7]||(e[7]=[u(" No data found. ")])),loading:i(()=>e[8]||(e[8]=[u(" Loading data. Please wait. ")])),default:i(()=>[t(n,{header:"No"},{body:i(o=>[u(w(o.index+1),1)]),_:1}),t(n,{field:"name",header:"Name"}),t(n,{field:"guard_name",header:"Guard"}),t(n,{field:"created_at",header:"Created"}),t(n,{field:"updated_at",header:"Updated"}),t(n,{exportable:!1,style:{"min-width":"12rem"}},{body:i(o=>[c(t(d,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:D=>(s.editOpen=!0,s.permission=o.data)},null,8,["onClick"]),[[f,r.can(["update permission"])]]),c(t(d,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:D=>{m.value=!0,s.permission=o.data}},null,8,["onClick"]),[[f,r.can(["delete permission"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(S,{visible:m.value,"onUpdate:visible":e[5]||(e[5]=o=>m.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[t(d,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=o=>m.value=!1)}),t(d,{label:"Yes",icon:"pi pi-check",onClick:k})]),default:i(()=>[l("div",W,[e[11]||(e[11]=l("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),s.permission?(b(),K("span",X,[e[9]||(e[9]=u("Are you sure you want to delete ")),l("b",null,w(s.permission.name),1),e[10]||(e[10]=u("?"))])):L("",!0)])]),_:1},8,["visible"])])]),_:1})}}};export{$e as default};
